{% extends 'homeapp/base.html' %}
{% load static %}

{% load cart %}

{% block nav_block %}
<link rel="stylesheet" href="{% static 'homeapp/css/cart.css' %}" type="text/css">
<div class="container">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class='border rounded p-4 m-4'>
            <p class="display-4">ðŸ›’Your cart: </p>
            {% if request.session.user_id %}
            <a href="{% url 'homeapp:orderlist' %}"><button class="btn btn-primary float-right mb-2 mt-1"><i
                        class="fa fa-check-circle"></i> Your Orders</button></a>
            <table class="table table-responsive">
                <thead>
                    <tr>
                        <th>S.N.</th>
                        <th>Image</th>
                        <th>Product</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Total</th>
                        <th> </th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    {% for product in products %}
                    <tr id='{{product.id}}'>
                        <td>{{forloop.counter}}.</td>
                        <td><img class="rounded-circle" src="{{product.product.imageUrl}}" alt="product Image"></td>
                        <td><a href="{% url 'homeapp:prodetail' pslug=product.product.pslug %}">{{product.product.name}}</a></td>
                        <td>Rs. {{product.product.price}}</td>
                        <td>{{product.quantity}}</td>
                        {% comment %} <td class="text-center">Rs. {{product.quantity|multiply:product.product.price}}</td> {% endcomment %}
                        <td class="text-center">Rs. {{product.totalprice}}</td>
                        <td>
                            <div class="m-1 p-1">
                                <a href="{% url 'homeapp:order' pslug=product.id %}"
                                    class="btn btn-outline-info border rounded btn-sm ">Order now</a>
                            </div>
                        </td>
                        <td>
                            <div class="m-1 p-1">
                                <a class="btn btn-primary" href="{% url 'homeapp:cartmanage' product.id %}?action=plus ">+</a>
                                <a  class="btn btn-warning" href="{% url 'homeapp:cartmanage' product.id %}?action=minus">-</a>
                                <a  class="btn btn-danger" href="{% url 'homeapp:cartmanage' product.id %}?action=rem">x</a>
                            </div>
                        </td>
                    </tr>


                </tbody>
                {% endfor %}
                <tfoot>
                    <!-- <tr>
                            <th colspan=" 5">Total</th>
                </tr> -->
                </tfoot>
            </table>
        </div>
    </div>

    {% else %}
    <br><br>
    <h3 class="text-center">{{msg1}}</h3>

    {% endif %}

<div class="">
    <nav aria-label="...">
        <ul class="pagination">


            {% if products.has_previous %}
            <li class="page-item ">
                <a class="page-link" href="?page={{ products.previous_page_number }}" tabindex="-1">Previous</a>
            </li>
            {% else%}
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1">Previous</a>
            </li>
            {% endif %}



            {% for i in products.paginator.page_range %}
            {% if i == products.number%}
            <li class="page-item active"><a class="page-link">{{i}}</a></li>
            {% else %}
            <li class="page-item"><a class="page-link" href="?page={{i}}">{{i}}</a></li>
            {% endif %}
            {% endfor %}

            

            {% if products.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ products.next_page_number }}">Next</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" href="#">Next</a>
            </li>
            {% endif %}


        </ul>
    </nav>
</div>

</div>
</div>
</div>
{% endblock %}
{% block foot_block %}
{% endblock %}